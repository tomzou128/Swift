# 10. Local Storage

## Save small and standard data
### Initialize
UserDefaults us used to save small amount of standard data into key-value pair. It can't save custom objects. In here, we want to save a String array.
```swift
let defaults = UserDefaults.standard
```

### Load data
```swift
if let items = defaults.array(forKey: "itemArray") as? [String] {
    itemArray = items
}
```

### Save data
```swift
var itemArray = ["apple", "pear", "peach"]
defaults.set(itemArray, forKey: "itemArray")
```
<br>

## Save small and custom data
### Initialize
```swift
var itemArray = [Item]()
// Create a lcoation on memory
let dataFilePath = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first?.appendingPathComponent("Item.plist")
```

### Load data
```Item``` is codable.
```swift
func loadItems() {
    if let data = try? Data(contentsOf: dataFilePath!) {
        let decoder = PropertyListDecoder()
        do {
            itemArray = try decoder.decode([Item].self, from: data)
        } catch  {
            print(error)
        }
    }
}
```

### Save data
It saves the whole list to memory.
```swift
func saveItems() {
    let encoder = PropertyListEncoder()
    do {
        let data = try encoder.encode(itemArray)
        try data.write(to: dataFilePath!)
    } catch {
        print(error)
    }
}
```
